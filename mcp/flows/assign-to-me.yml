name: assign-to-me
description: Agent opens first conversation and assigns it to self
steps:
  - type: goto
    url: env.KAYAKO_AGENT_URL
  - type: expect-visible
    selectorKey: login.submitButton
  - type: fill
    selectorKey: login.emailInput
    value: env.KAYAKO_USERNAME
  - type: fill
    selectorKey: login.passwordInput
    value: env.KAYAKO_PASSWORD
  - type: click
    selectorKey: login.submitButton
  # If a conversation ID is provided in env, open it directly
  - type: goto-conversation-by-env-id
    optional: true
  - type: wait
    value: "200"
    optional: true
  - type: goto
    url: env.KAYAKO_CONVERSATIONS_URL
  - type: expect-visible
    selectorKey: inbox.conversationSubject
  - type: click
    selectorKey: inbox.conversationSubject
  - type: wait-loadstate
    state: networkidle
    optional: true
  # Switch team (if already assigned, flip to alternate), select agent, and save
  - type: switch-assignee-and-save
    order:
      - "VIP Account Team"
      - "General"
  - type: log-assignee
    optional: true
  - type: wait
    value: "5000"


