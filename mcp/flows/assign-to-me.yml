name: assign-to-me
description: Agent opens first conversation and assigns it to self
steps:
  - type: goto
    url: env.KAYAKO_AGENT_URL
  - type: expect-visible
    selectorKey: login.submitButton
  - type: fill
    selectorKey: login.emailInput
    value: env.KAYAKO_USERNAME
  - type: fill
    selectorKey: login.passwordInput
    value: env.KAYAKO_PASSWORD
  - type: click
    selectorKey: login.submitButton
  - type: goto
    url: env.KAYAKO_CONVERSATIONS_URL
  - type: expect-visible
    selectorKey: inbox.conversationSubject
  - type: click
    selectorKey: inbox.conversationSubject
  - type: expect-visible
    selectorKey: composer.editor
  - type: click
    selectorKey: composer.editor
  - type: wait
    value: "250"
  # Try composer footer "Assign to me" path first (optional attempts)
  - type: dispatch-click
    selectorKey: assign.assignToMeTrigger
    optional: true
  - type: wait
    value: "200"
    optional: true
  - type: dispatch-click-text
    value: "General"
    optional: true
  - type: wait
    value: "200"
    optional: true
  - type: click
    selectorKey: assign.selfOption
    optional: true
  - type: wait
    value: "200"
    optional: true
  # Fallback path via Properties â†’ Assignee
  - type: click
    selectorKey: assign.assigneeFieldTrigger
  - type: wait
    value: "250"
  - type: dispatch-click-text
    value: "General"
  - type: wait
    value: "250"
  - type: click
    selectorKey: assign.selfOption
  - type: wait
    value: "200"
  - type: click
    selectorKey: assign.updatePropertiesButton
    optional: true
  - type: expect-visible
    selectorKey: assign.confirmation


