name: add-internal-note
description: Agent opens first conversation and adds an internal note
steps:
  - type: goto
    url: env.KAYAKO_AGENT_URL
  - type: expect-visible
    selectorKey: login.submitButton
  - type: fill
    selectorKey: login.emailInput
    value: env.KAYAKO_USERNAME
  - type: fill
    selectorKey: login.passwordInput
    value: env.KAYAKO_PASSWORD
  - type: click
    selectorKey: login.submitButton
  - type: goto
    url: env.KAYAKO_CONVERSATIONS_URL
  - type: expect-visible
    selectorKey: inbox.conversationSubject
  - type: click
    selectorKey: inbox.conversationSubject
  - type: expect-visible
    selectorKey: conversation.subjectHeading
  - type: wait
    value: "1500"
  - type: click
    selectorKey: composer.editor
  - type: click
    selectorKey: composer.internalNoteToggle
  - type: fill
    selectorKey: composer.editor
    value: "[AUTOTEST] Internal note added by MCP"
  - type: click
    selectorKey: composer.addNoteButton
  - type: expect-visible
    selectorKey: conversation.timelineEntry


